{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block page_content %}
{% if slideshows %}
<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  {% for slideshow in slideshows -%}
  <div class="panel panel-default slideshow-panel">
    <div class="panel-heading" role="tab" id="heading_{{ slideshow.id }}">
      <div class="row slideshow-row">
        <div class="col-xs-2">
          <h4 class="panel-title">
            <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse_{{ slideshow.id }}" aria-expanded="true" aria-controls="collapse_{{ slideshow.id }}">
              {{ slideshow.title|e }}
            </a>
          </h4>
        </div>
        <div class="row slideshow-buttons">
          {% if current_user == slideshow.user -%}
          <button type="button" class="btn btn-default btn-sm" data-toggle="collapse" data-target="#collapseEdit_{{ slideshow.id }}" aria-expanded="false" aria-controls="collapseEdit_{{ slideshow.id }}"><span class="glyphicon glyphicon-cog" aria-hidden="true"> Edit</button>
          <a type="button" class="btn btn-success btn-sm" href="{{ url_for('slideshow.present', id=slideshow.id) }}">
            <span class="glyphicon glyphicon-play" aria-hidden="true"></span> Present
          </a>
          {%- endif %}
          <a type="button" class="btn btn-primary btn-sm" href="{{ url_for('slideshow.listen', id=slideshow.id) }}">
            <span class="glyphicon glyphicon-blackboard" aria-hidden="true"></span> View
          </a>
          <a type="button" class="btn btn-info btn-sm" href="{{ url_for('slideshow.view', id=slideshow.id) }}">
            <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span> Read
          </a>
        </div>
      </div>
    </div>
    <div id="collapse_{{ slideshow.id }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading_{{ slideshow.id }}">
      <div class="panel-body">
        <b>Owner:</b> <span class="badge">{{ slideshow.user.username }}</span>
        <br>
        Description will be here!
      </div>
    </div>
    <div id="collapseEdit_{{ slideshow.id }}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading_{{ slideshow.id }}">
      <div class="panel-body">
        {{ wtf.quick_form(populate_form(slideshow), button_map=dict(submit="primary", cancel="danger")) }}
      </div>
    </div>
  </div>
  {%- endfor %}
</div>
{% else %}
<div class="text-center page-header">
  <h3><small>No slideshows found</small></h3>
</div>
{% endif %}
{% endblock %}
